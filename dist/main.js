(()=>{"use strict";const e=document.querySelector(".main-slider").querySelectorAll(".slide"),t=document.querySelector(".services-slider"),l=t.querySelectorAll(".slide"),c=document.querySelector(".gallery-slider"),o=c.querySelectorAll(".slide"),s=document.createElement("ul");s.classList="slider-dots",c.appendChild(s);let a=0,n=4;const r=document.querySelector(".top-menu"),d=document.querySelector(".about-club"),i=document.getElementById("totop");i.style.display="none";let u=r.getBoundingClientRect().top,m=d.getBoundingClientRect().bottom;const y={1:1999,6:9900,9:13900,12:19900},p={1:2999,6:14990,9:21990,12:24990},h=document.querySelectorAll(".time>input"),v=document.getElementById("card_leto_mozaika"),g=document.getElementById("card_leto_schelkovo"),E=document.getElementById("price-total");(function(){const r=e=>{clearInterval(e)},d=e=>{const t=document.createElement("div");t.classList="slider-arrow prev";const l=document.createElement("span");l.classList="arrow arrow-left",t.append(l),e.appendChild(t)},i=e=>{const t=document.createElement("div");t.classList="slider-arrow next";const l=document.createElement("span");l.classList="arrow arrow-right",t.append(l),e.appendChild(t)};d(c),i(c),d(t),i(t);const u=(e,t,l=[],c="")=>{e[t].style.display="none",c&&l[t].classList.remove(c)},m=(e,t,l=[],c="")=>{e[t].style.display="inline-block",c&&l[t].classList.add(c)};(()=>{let t,l=0;const c=()=>{u(e,l),l++,l>=e.length&&(l=0),m(e,l)};((e=3e3)=>{t=setInterval(c,e)})()})(),(()=>{let e;l.forEach(((e,t)=>{t>=5&&(e.style.display="none")}));const c=(e=1,t=1)=>{a>4&&(a=0,n=4),a+=e,n+=t,a<0&&(a=4,n=8),l.forEach(((e,t)=>{t>=a&&t<=n?e.style.display="block":(t<a||t>n)&&(e.style.display="none")}))},o=()=>{e=setInterval(c,2100)};o(),t.addEventListener("mouseover",(t=>{t.target.matches(".arrow")&&r(e)})),t.addEventListener("mouseout",(e=>{e.target.matches(".arrow")&&o()})),t.addEventListener("click",(e=>{e.preventDefault();const t=e.target;t.matches(".arrow")&&(t.matches(".arrow-right")?c(1,1):t.matches(".arrow-left")&&c(-1,-1))}))})(),(()=>{const e=[],t=[];o.forEach(((l,c)=>{e[c]=document.createElement("li"),e[c].classList="slick",e[c].style.cssText="opacity: 1;",t[c]=document.createElement("button"),t[c].classList="dot",t[c].style.cssText="opacity: 1;",e[c].appendChild(t[c]),0===c?e[c].classList.add("slick-active"):c>=1&&(l.style.display="none"),s.appendChild(e[c])}));let l,a=0;const n=()=>{u(o,a,e,"slick-active"),a++,a>=o.length&&(a=0),m(o,a,e,"slick-active")},d=(e=1900)=>{l=setInterval(n,e)};d(),c.addEventListener("click",(e=>{e.preventDefault();const t=e.target;t.matches(".arrow, .dot")&&(u(o,a,document.querySelectorAll(".slick"),"slick-active"),t.matches(".arrow-right")?(a++,a>=o.length&&(a=0)):t.matches(".arrow-left")?(a--,a<0&&(a=o.length-1)):t.matches(".dot")&&document.querySelectorAll(".dot").forEach(((e,l)=>{t===e&&(a=l)})),m(o,a,document.querySelectorAll(".slick"),"slick-active"))})),c.addEventListener("mouseover",(e=>{(e.target.matches(".arrow")||e.target.matches(".dot"))&&r(l)})),c.addEventListener("mouseout",(e=>{(e.target.matches(".arrow")||e.target.matches(".dot"))&&d()}))})()})(),function(){const e=document.querySelector(".clubs-list"),t=document.getElementById("free_visit_form"),l=document.getElementById("callback_form"),c=document.getElementById("gift"),o=document.getElementById("thanks"),s=e.querySelector("ul"),a=s.querySelectorAll("li");let n=!1;document.addEventListener("click",(e=>{const r=e.target;r.closest(".clubs-list")&&!n?(s.style.display="block",n=!0):r!=a[0]&&r!=a[1]&&r!=s&&(s.style.display="none",n=!1),r.closest(".open-popup")?t.style.display="block":(r.closest(".close-form")||r.closest(".overlay"))&&(t.style.display="none"),r.closest(".callback-btn")?l.style.display="block":(r.closest(".close-form")||r.closest(".overlay"))&&(l.style.display="none"),r.closest(".fixed-gift")?(document.querySelector(".fixed-gift").style.display="none",c.style.display="block"):(r.closest(".close-form")||r.closest(".overlay")||r.matches(".close-btn"))&&(o&&(o.style.display="none"),c&&(c.style.display="none")),r.matches('[src="images/menu-button.png"]')?document.querySelector(".popup-menu").style.display="flex":(r.matches('[src="images/delete.png"]')||r.matches("a"))&&(document.querySelector(".popup-menu").style.display="none")}))}(),document.addEventListener("scroll",(()=>{let e=window.pageYOffset;m<=e?i.style.display="block":m>=e&&(i.style.display="none"),document.documentElement.clientWidth<=768?u<e?(r.style.cssText="position: fixed",r.style.top=e):u>=e&&(r.style.cssText='position: ""',r.style.top=u):document.documentElement.clientWidth>=768&&(r.style.cssText='position: ""',r.style.top=u)})),function(){let e;document.getElementById("cards").addEventListener("input",(()=>{v&&v.checked?h.forEach((t=>{t&&t.checked&&(e=y[t.value])})):g&&g.checked&&h.forEach((t=>{t&&t.checked&&(e=p[t.value])}));let t=document.getElementById("cards").querySelector('[placeholder="Промокод"]');t&&"ТЕЛО2019"===t.value.toUpperCase()&&(e*=.7),E&&(E.textContent=Math.ceil(e))}))}(),document.addEventListener("input",(e=>{const t=e.target;t.matches('[placeholder="Ваше имя..."]')?t.value=t.value.replace(/[^ А-яа-я]/,""):t.matches('[placeholder="Ваш номер телефона..."]')&&(t.value=t.value.replace(/[^\d\+]/g,""),t.value=t.value.replace(/([0-9]{11})(.)/g,((e,t,l)=>t)))})),document.addEventListener("blur",(e=>{const t=e.target;t.matches('[placeholder="Ваше имя..."]')?(t.value=t.value.replace(/\s+/g," "),t.value=t.value.replace(/(\s\-)+/g,""),t.value=t.value.replace(/\-+/g,"-"),t.value=t.value.replace(/^[\s\-]+/gi,""),t.value=t.value.replace(/\w+/gi,""),t.value=t.value.replace(/\-$/gi,""),t.value&&(t.value=t.value.split(/\s+/).map((e=>e[0].toUpperCase()+e.substring(1).toLowerCase())).join(" "))):t.matches('[placeholder="Ваш номер телефона..."]')&&(t.value=t.value.replace(/^8{1}|^7|\+7/gi,"+7 "),t.value=t.value.replace(/^...([0-9]{3})/g,((e,t)=>`+7 ${t} `)),14!==t.value.length&&""!==t.value&&(t.value="",alert("Введите номер в формате 7хххххххххх")))}),!0),(()=>{const e="Что-то пошло не так",t=document.querySelector("#thanks"),l=t.querySelector("p"),c=l.textContent;document.querySelectorAll("form").forEach((o=>{o.addEventListener("submit",(s=>{s.preventDefault();const a=o.querySelector('[type="checkbox"]');if(a&&!a.checked)return void alert("Необходимо подтвердить согласие на обработку персональных данных");const n=o.querySelectorAll('[name="club-name"]');let r=!0;if(n.length>1&&(r=!1,n.forEach((e=>{e.checked&&(r=!0)})),!r))return void alert("Необходимо выбрать клуб");const d=new FormData(o),i={};d.forEach(((e,t)=>{i[t]=e})),o.querySelector("#price-total")&&(i.price=o.querySelector("#price-total").textContent),"form1"!==o.id&&"form2"!==o.id||(o.parentElement.parentElement.parentElement.style.display="none"),document.querySelectorAll('[placeholder="Промокод"]').forEach((e=>{e.value=""})),document.querySelectorAll('[placeholder="Ваше имя..."]').forEach((e=>{e.value=""})),document.querySelectorAll('[placeholder="Ваш номер телефона..."]').forEach((e=>{e.value=""})),document.querySelectorAll('[type="checkbox"]').forEach((e=>{e.checked=!1})),t.style.display="block",l.textContent="Ожидаем ответа сервера",(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(i).then((o=>{if(200!==o.status)return l.textContent=e,t.style.display="block",void setTimeout((()=>{t.style.display="none"}),2e3);l.textContent=c,t.style.display="block",setTimeout((()=>{t.style.display="none"}),2e3)})).catch((c=>{l.textContent=e,t.style.display="block",setTimeout((()=>{t.style.display="none"}),2e3)}))}))}))})()})();