(()=>{"use strict";const e=document.querySelector(".main-slider").querySelectorAll(".slide"),t=document.querySelector(".services-slider"),l=t.querySelectorAll(".slide"),o=document.querySelector(".gallery-slider"),c=o.querySelectorAll(".slide"),s=document.createElement("ul");s.classList="slider-dots",o.appendChild(s);let a=0,n=4;const r=document.querySelector(".top-menu"),d=document.querySelector(".about-club"),i=document.getElementById("totop");i.style.display="none";let u=r.getBoundingClientRect().top,m=d.getBoundingClientRect().bottom;const p={1:1999,6:9900,9:13900,12:19900},y={1:2999,6:14990,9:21990,12:24990},h=document.querySelectorAll(".time>input"),v=document.getElementById("card_leto_mozaika"),g=document.getElementById("card_leto_schelkovo"),E=document.getElementById("price-total");(function(){const r=e=>{clearInterval(e)},d=e=>{const t=document.createElement("div");t.classList="slider-arrow prev";const l=document.createElement("span");l.classList="arrow arrow-left",t.append(l),e.appendChild(t)},i=e=>{const t=document.createElement("div");t.classList="slider-arrow next";const l=document.createElement("span");l.classList="arrow arrow-right",t.append(l),e.appendChild(t)};d(o),i(o),d(t),i(t);const u=(e,t,l=[],o="")=>{e[t].style.display="none",o&&l[t].classList.remove(o)},m=(e,t,l=[],o="")=>{e[t].style.display="inline-block",o&&l[t].classList.add(o)};(()=>{let t,l=0;const o=()=>{u(e,l),l++,l>=e.length&&(l=0),m(e,l)};((e=3e3)=>{t=setInterval(o,e)})()})(),(()=>{let e;l.forEach(((e,t)=>{t>=5&&(e.style.display="none")}));const o=(e=1,t=1)=>{a>4&&(a=0,n=4),a+=e,n+=t,a<0&&(a=4,n=8),l.forEach(((e,t)=>{t>=a&&t<=n?e.style.display="block":(t<a||t>n)&&(e.style.display="none")}))},c=()=>{e=setInterval(o,2100)};c(),t.addEventListener("mouseover",(t=>{t.target.matches(".arrow")&&r(e)})),t.addEventListener("mouseout",(e=>{e.target.matches(".arrow")&&c()})),t.addEventListener("click",(e=>{e.preventDefault();const t=e.target;t.matches(".arrow")&&(t.matches(".arrow-right")?o(1,1):t.matches(".arrow-left")&&o(-1,-1))}))})(),(()=>{const e=[],t=[];c.forEach(((l,o)=>{e[o]=document.createElement("li"),e[o].classList="slick",e[o].style.cssText="opacity: 1;",t[o]=document.createElement("button"),t[o].classList="dot",t[o].style.cssText="opacity: 1;",e[o].appendChild(t[o]),0===o?e[o].classList.add("slick-active"):o>=1&&(l.style.display="none"),s.appendChild(e[o])}));let l,a=0;const n=()=>{u(c,a,e,"slick-active"),a++,a>=c.length&&(a=0),m(c,a,e,"slick-active")},d=(e=1900)=>{l=setInterval(n,e)};d(),o.addEventListener("click",(e=>{e.preventDefault();const t=e.target;t.matches(".arrow, .dot")&&(u(c,a,document.querySelectorAll(".slick"),"slick-active"),t.matches(".arrow-right")?(a++,a>=c.length&&(a=0)):t.matches(".arrow-left")?(a--,a<0&&(a=c.length-1)):t.matches(".dot")&&document.querySelectorAll(".dot").forEach(((e,l)=>{t===e&&(a=l)})),m(c,a,document.querySelectorAll(".slick"),"slick-active"))})),o.addEventListener("mouseover",(e=>{(e.target.matches(".arrow")||e.target.matches(".dot"))&&r(l)})),o.addEventListener("mouseout",(e=>{(e.target.matches(".arrow")||e.target.matches(".dot"))&&d()}))})()})(),function(){const e=document.querySelector(".clubs-list"),t=document.getElementById("free_visit_form"),l=document.getElementById("callback_form"),o=document.getElementById("gift"),c=document.getElementById("thanks"),s=e.querySelector("ul"),a=s.querySelectorAll("li");let n=!1;document.addEventListener("click",(e=>{const r=e.target;r.closest(".clubs-list")&&!n?(s.style.display="block",n=!0):r!=a[0]&&r!=a[1]&&r!=s&&(s.style.display="none",n=!1),r.closest(".open-popup")?t.style.display="block":(r.closest(".close-form")||r.closest(".overlay"))&&(t.style.display="none"),r.closest(".callback-btn")?l.style.display="block":(r.closest(".close-form")||r.closest(".overlay"))&&(l.style.display="none"),r.closest(".fixed-gift")?(document.querySelector(".fixed-gift").style.display="none",o.style.display="block"):(r.closest(".close-form")||r.closest(".overlay")||r.matches(".close-btn"))&&(o.style.display="none",c.style.display="none"),r.matches('[src="images/menu-button.png"]')?document.querySelector(".popup-menu").style.display="flex":(r.matches('[src="images/delete.png"]')||r.matches("a"))&&(document.querySelector(".popup-menu").style.display="none")}))}(),document.addEventListener("scroll",(()=>{let e=window.pageYOffset;m<=e?i.style.display="block":m>=e&&(i.style.display="none"),document.documentElement.clientWidth<=768?u<e?(r.style.cssText="position: fixed",r.style.top=e):u>=e&&(r.style.cssText='position: ""',r.style.top=u):document.documentElement.clientWidth>=768&&(r.style.cssText='position: ""',r.style.top=u)})),function(){let e;document.getElementById("cards").addEventListener("input",(()=>{v.checked?h.forEach((t=>{t.checked&&(e=p[t.value])})):g.checked&&h.forEach((t=>{t.checked&&(e=y[t.value])})),"ТЕЛО2019"===document.getElementById("cards").querySelector('[placeholder="Промокод"]').value.toUpperCase()&&(e*=.7),E.textContent=Math.ceil(e)}))}(),document.addEventListener("input",(e=>{const t=e.target;t.matches('[placeholder="Ваше имя..."]')?t.value=t.value.replace(/[^ А-яа-я]/,""):t.matches('[placeholder="Ваш номер телефона..."]')&&(t.value=t.value.replace(/[^\d\+]/g,""),t.value=t.value.replace(/([0-9]{11})(.)/g,((e,t,l)=>t)))})),document.addEventListener("blur",(e=>{const t=e.target;t.matches('[placeholder="Ваше имя..."]')?(t.value=t.value.replace(/\s+/g," "),t.value=t.value.replace(/(\s\-)+/g,""),t.value=t.value.replace(/\-+/g,"-"),t.value=t.value.replace(/^[\s\-]+/gi,""),t.value=t.value.replace(/\w+/gi,""),t.value=t.value.replace(/\-$/gi,""),t.value&&(t.value=t.value.split(/\s+/).map((e=>e[0].toUpperCase()+e.substring(1).toLowerCase())).join(" "))):t.matches('[placeholder="Ваш номер телефона..."]')&&(t.value=t.value.replace(/^8{1}|^7|\+7/gi,"+7 "),t.value=t.value.replace(/^...([0-9]{3})/g,((e,t)=>`+7 ${t} `)),14!==t.value.length&&""!==t.value&&(t.value="",alert("Введите номер в формате 7хххххххххх")))}),!0),(()=>{const e="Что-то пошло не так",t=document.querySelector("#thanks"),l=t.querySelector("p"),o=l.textContent;document.querySelectorAll("form").forEach((c=>{c.addEventListener("submit",(s=>{s.preventDefault();const a=c.querySelector('[type="checkbox"]');if(a&&!a.checked)throw alert("Необходимо подтвердить согласие на обработку персональных данных"),new Error("personal data not accepted");const n=c.querySelectorAll('[name="club-name"]');let r=!0;if(n&&(r=!1,n.forEach((e=>{e.checked&&(r=!0)})),!r))throw alert("Необходимо выбрать клуб"),new Error("club was not choosen");const d=new FormData(c),i={};d.forEach(((e,t)=>{i[t]=e})),"form1"!==c.id&&"form2"!==c.id||(c.parentElement.parentElement.parentElement.style.display="none"),document.querySelectorAll('[placeholder="Промокод"]').forEach((e=>{e.value=""})),document.querySelectorAll('[placeholder="Ваше имя..."]').forEach((e=>{e.value=""})),document.querySelectorAll('[placeholder="Ваш номер телефона..."]').forEach((e=>{e.value=""})),document.querySelectorAll('[type="checkbox"]').forEach((e=>{e.checked=!1})),t.style.display="block",l.textContent="Ожидаем ответа сервера",(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(i).then((c=>{if(200!==c.status)throw l.textContent=e,t.style.display="block",setTimeout((()=>{t.style.display="none"}),2e3),new Error("Network status is not 200");l.textContent=o,t.style.display="block",setTimeout((()=>{t.style.display="none"}),2e3)})).catch((o=>{l.textContent=e,t.style.display="block",setTimeout((()=>{t.style.display="none"}),2e3),console.error(o)}))}))}))})()})();